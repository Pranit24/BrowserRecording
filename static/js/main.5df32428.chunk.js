(this.webpackJsonprecord=this.webpackJsonprecord||[]).push([[0],{20:function(e,t,a){e.exports=a(44)},25:function(e,t,a){},27:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(11),i=a.n(o),s=(a(25),a(4)),c=a.n(s),d=a(6),l=a(12),u=a(13),p=a(18),m=a(15),g=a(19),v=(a(27),a(49)),h=a(46),E=a(47),f=a(48),w=a(8);var y=a(16),b=a.n(y),S={encoderWorkerFactory:function(){return new Worker("/BrowserRecording/opus-media-recorder/encoderWorker.umd.js")},OggOpusEncoderWasmPath:"/BrowserRecording/opus-media-recorder/OggOpusEncoder.wasm",WebMOpusEncoderWasmPath:"/BrowserRecording/opus-media-recorder/WebMOpusEncoder.wasm"},k=a(42),A=!!(navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia),R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){A?(a.requestUserMedia(),a.state.audio.addEventListener("ended",(function(){a.stopAudio()}))):alert("Browser not supported")},a.requestUserMedia=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("requestUserMedia"),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({audio:!0});case 4:window.MediaRecorder.isTypeSupported("audio/ogg;codecs=opus")||(window.MediaRecorder=b.a),a.setState({micEnabled:!0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Enable microphone and refresh"),a.setState({micEnabled:!1});case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),a.startRecording=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.requestUserMedia(),a.state.playFlag||a.stopAudio(),a.setState((function(e){return{recordFlag:!e.recordFlag,playFlag:!0}})),e.next=5,navigator.mediaDevices.getUserMedia(a.state.rtcSession,{audio:!0});case 5:t=e.sent,a.setState({recordAudio:new w.RecordRTCPromisesHandler(t,a.state.rtcSession)}),a.state.recordAudio.startRecording(),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){var t={mimeType:a.props.mimeType};a.recorder=new MediaRecorder(e,t,S),a.setState({state:"inactive"}),a.recorder.start(),a.recorder.addEventListener("dataavailable",(function(e){console.log("Recording stopped, data available"),a.onDataAvailable(e)})),a.recorder.addEventListener("start",(function(e){console.log("start"),a.setState({state:"recording"})})),a.recorder.addEventListener("stop",(function(e){console.log("stop"),a.setState({state:"inactive"})})),a.recorder.addEventListener("pause",(function(e){console.log("pause"),a.setState({state:"paused"})})),a.recorder.addEventListener("resume",(function(e){console.log("resume"),a.setState({state:"recording"})})),a.recorder.addEventListener("error",(function(e){console.log("error")}))}));case 9:case"end":return e.stop()}}),e)}))),a.stopRecording=Object(d.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.requestUserMedia(),a.setState((function(e){return{recordFlag:!e.recordFlag}})),e.next=4,a.state.recordAudio.stopRecording();case 4:return t=e.sent,e.next=7,a.state.recordAudio.getBlob();case 7:r=e.sent,console.log(a.state.audio.duration),a.setState({data:r,url:t});case 10:case"end":return e.stop()}}),e)}))),a.playAudio=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState((function(e){return{playFlag:!e.playFlag}})),(t=a.state.audio).src=a.state.url,t.preload="metadata",t.play(),a.setState({audio:t});case 6:case"end":return e.stop()}}),e)}))),a.stopAudio=function(){a.setState((function(e){return{playFlag:!e.playFlag}}));var e=a.state.audio;e.pause(),e.currentTime=0,a.setState({audio:e})},a.saveAudio=function(){k.saveAs(a.state.data,"audio.wav")},a.state={recordAudio:null,src:null,data:null,url:null,micEnabled:!1,recordFlag:!0,playFlag:!0,audio:new Audio,rtcSession:{type:"audio",mimeType:"audio/wav",audio:!0,recorderType:w.StereoAudioRecorder}},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t,a;return t=this.state.micEnabled?this.state.recordFlag?n.a.createElement(v.a,{variant:"primary",size:"lg",onClick:this.startRecording,active:!0,style:{marginBottom:"20px"}},"Start Recording"):n.a.createElement(v.a,{variant:"primary",size:"lg",onClick:this.stopRecording,active:!0,style:{marginBottom:"20px"}},"Stop Recording"):n.a.createElement(v.a,{variant:"secondary",size:"lg",onClick:this.startRecording,disabled:!0,style:{marginBottom:"20px"}},"Start Recording"),this.state.data&&this.state.recordFlag&&this.state.playFlag?(e=n.a.createElement(v.a,{variant:"primary",size:"lg",onClick:this.playAudio,active:!0},"Play Audio"),a=n.a.createElement(v.a,{variant:"success",size:"lg",onClick:this.saveAudio,active:!0},"Save Audio")):this.state.data&&this.state.recordFlag&&!this.state.playFlag&&(e=n.a.createElement(v.a,{variant:"danger",size:"lg",onClick:this.stopAudio,active:!0},"Stop Playing Audio"),a=n.a.createElement(v.a,{variant:"success",size:"lg",onClick:this.saveAudio,active:!0},"Save Audio")),n.a.createElement("div",{className:"App"},n.a.createElement("div",null,n.a.createElement("h1",null,"Browser Recorder"),n.a.createElement("p",null,n.a.createElement("sub",null,"Tested in Chrome, Firefox and Safari")),n.a.createElement("p",null,"This is a simple web application used to record audio using your microphone and play it back or save it to your local machine"),n.a.createElement("p",null,"GitHub Link:",n.a.createElement("a",{href:"https://github.com/Pranit24/BrowserRecording"},"https://github.com/Pranit24/BrowserRecording"))),n.a.createElement(h.a,{style:{marginTop:"50px"}},n.a.createElement(E.a,null,n.a.createElement(f.a,null,t)),n.a.createElement(E.a,null,n.a.createElement(f.a,null,e),n.a.createElement(f.a,null,a),n.a.createElement(f.a,null),n.a.createElement(f.a,null),n.a.createElement(f.a,null))),n.a.createElement("br",null))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(43);i.a.render(n.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.5df32428.chunk.js.map